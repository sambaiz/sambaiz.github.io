<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>sambaiz.net</title>
    <link>http://sambaiz.net/tags/api/index.xml</link>
    <language>ja</language>
    <author>sambaiz</author>
    <rights>(C) 2017</rights>
    <updated>0001-01-01 00:00:00 &#43;0000 UTC</updated>

    
      
        <item>
          <title>API BlueprintでAPI仕様を書く</title>
          <link>http://sambaiz.net/article/34/</link>
          <pubDate>Thu, 10 Nov 2016 00:25:00 &#43;0900</pubDate>
          <author></author>
          <guid>http://sambaiz.net/article/34/</guid>
          <description>&lt;p&gt;&lt;a href=&#34;https://apiblueprint.org/&#34;&gt;API Blueprint&lt;/a&gt;というのはAPIの仕様を書くための言語で、
これを元にHTMLのドキュメントにしたり、モックサーバーを立てたりする&lt;a href=&#34;https://apiblueprint.org/tools.html&#34;&gt;ツール&lt;/a&gt;がある。&lt;/p&gt;

&lt;p&gt;最初にMetadataとして、API Blueprintのバージョンを書く。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;FORMAT: 1A
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;基本的にはMarkdownのように書ける。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# テストAPI
テスト
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;頭にGroupと書くとグループができる。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;# Group echo
やまびこ
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;終わりに&lt;code&gt;[]&lt;/code&gt;で囲んでリソースを書く。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;## echo [/echo]
やっほー
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;アクション。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;### echo [POST]
叫ぶ

+ say (string) - 発声
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;リクエスト例とレスポンス例はこんな感じ。&lt;a href=&#34;https://apiblueprint.org/documentation/advanced-tutorial.html#json-schema&#34;&gt;JSON Schemaを書くこともできる&lt;/a&gt;。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;+ Request (application/json)

    {
        &amp;quot;say&amp;quot;: &amp;quot;yahho&amp;quot;
    }

+ Response 200 (application/json)

  + Headers

    Hoge: Fuga

  + Body

    {
        &amp;quot;echo&amp;quot;: &amp;quot;yahho&amp;quot;
    }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;全体&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;FORMAT: 1A

# テストAPI
テスト

# Group echo
やまびこ

## echo [/echo]
やっほー

### echo [POST]
叫ぶ

+ say (string) - 発声

+ Request (application/json)

    {
        &amp;quot;say&amp;quot;: &amp;quot;yahho&amp;quot;
    }

+ Response 200 (application/json)

  + Headers

    Hoge: Fuga

  + Body

    {
        &amp;quot;echo&amp;quot;: &amp;quot;yahho&amp;quot;
    }
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;これを使って、&lt;a href=&#34;https://github.com/danielgtaylor/aglio&#34;&gt;aglio&lt;/a&gt;でHTMLにしたり、&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ npm install -g aglio
$ aglio -i test.apib -o test.html
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;img src=&#34;http://sambaiz.net/images/34_api_html.png&#34; alt=&#34;HTMLに出力したもの&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/localmed/api-mock&#34;&gt;api-mock&lt;/a&gt;でモックを立てたりすることができる。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ npm install -g api-mock
$ api-mock --version
api-mock v0.3.2

$ api-mock test.apib
info:    Enabled Cross-Origin-Resource-Sharing (CORS)
info:    	Allow-Origin: *
info:    	Allow-Methods: GET, PUT, POST, PATCH, DELETE, TRACE, OPTIONS
info:    	Allow-Headers: Origin, X-Requested-With, Content-Type, Accept, Authorization, Referer, Prefer
info:    Listening on port 3000
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ただnode v6でインストールしたらprotagonistのところで失敗してしまったので、5.12.0に下げて実行した。&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://sambaiz.net/article/8/&#34;&gt;nでNode.jsのバージョン管理&lt;/a&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ n 5.12.0
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;$ curl -X POST -H &amp;quot;Content-Type: application/json&amp;quot; -d &#39;{&amp;quot;say&amp;quot;: &amp;quot;ho&amp;quot;}&#39; &amp;quot;http://localhost:3000/echo&amp;quot;
{
    &amp;quot;echo&amp;quot;: &amp;quot;yahho&amp;quot;
}
&lt;/code&gt;&lt;/pre&gt;
</description>
        </item>
      
    

  </channel>
</rss>
