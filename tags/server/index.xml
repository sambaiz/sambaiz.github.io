<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>sambaiz-net</title>
    <link>http://sambaiz.net/tags/server/index.xml</link>
    <language>ja</language>
    <author>sambaiz</author>
    <rights>(C) 2017</rights>
    <updated>0001-01-01 00:00:00 &#43;0000 UTC</updated>

    
      
        <item>
          <title>H2OでHTTPS-&gt;HTTPのリバースプロキシを立てる</title>
          <link>http://sambaiz.net/article/75/</link>
          <pubDate>Thu, 02 Mar 2017 20:50:00 &#43;0900</pubDate>
          <author></author>
          <guid>http://sambaiz.net/article/75/</guid>
          <description>&lt;p&gt;&lt;a href=&#34;http://qiita.com/cubicdaiya/items/235777dc401ec419b14e&#34;&gt;良くチューニングされたNginxと同じくらい速い&lt;/a&gt;と
評判のHTTP/2サーバー&lt;a href=&#34;https://h2o.examp1e.net/&#34;&gt;H2O&lt;/a&gt;でリバースプロキシを立ててみる。
HTTP/2だけではなく1.xにも対応しているので古い環境などでも大丈夫。&lt;/p&gt;

&lt;p&gt;設定は
&lt;a href=&#34;https://github.com/h2o/h2o/wiki/Reverse-Proxy&#34;&gt;Reverse Proxy&lt;/a&gt;と
&lt;a href=&#34;https://github.com/h2o/h2o/wiki/redirect-HTTP-to-HTTPS&#34;&gt;HTTP to HTTPS&lt;/a&gt;の
サンプルをもとにして書いた。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;hosts:
  &amp;quot;*&amp;quot;:
    listen:
      port: 443
      ssl:
        certificate-file: /etc/h2o/oreore.crt
        key-file:         /etc/h2o/server.key
    paths:
      &amp;quot;/&amp;quot;:
        proxy.reverse.url: http://127.0.0.1:3000/

access-log: /dev/stdout
error-log: /dev/stderr
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;とりあえずオレオレ証明書で試してみる。&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ openssl genrsa 2048 &amp;gt; server.key # private key
$ openssl req -new -key server.key &amp;gt; server.csr # certificate signing request 
$ openssl x509 -days 365000 -req -signkey server.key &amp;lt; server.csr &amp;gt; oreore.crt # oreore certificate
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Dockerで動かす。&lt;a href=&#34;https://github.com/lkwg82/h2o.docker&#34;&gt;lkwg82/h2o.docker&lt;/a&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ vi h2o.conf
$ docker run -v $(pwd):/etc/h2o --net=host --name h2o --restart=always -itd lkwg82/h2o-http2-server
$ curl --insecure https://127.0.0.1 # -&amp;gt; :3000
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Chromeでアクセスして、Developer ToolsのNetworkで右クリックでProtocolにチェックを入れてh2と表示されていたら
HTTP/2で通信している。&lt;/p&gt;
</description>
        </item>
      
    

  </channel>
</rss>
